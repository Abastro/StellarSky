#version 130

uniform vec4 invres2; // 0.5 * (particleSize / resolution)^2
uniform float skyBrightness;
uniform float dominationscale;

uniform float radius; // radius / particleSize

in vec2 dominationCoord;
in vec4 color;

const vec2 center = vec2(0.5, 0.5);

void main()
{
    float dist = distance(gl_PointCoord, center) - radius;
    vec4 curColor = color * exp(- dist * dist * invres2);
    gl_FragColor = curColor - vec4(sqrt(skyBrightness) * dominationscale);
}